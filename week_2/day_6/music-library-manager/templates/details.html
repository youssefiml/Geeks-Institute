{% extends "base.html" %}

{% block title %}{{ album.title }} - Music Library{% endblock %}

{% block content %}
<div class="fade-in">
    <div class="mb-6">
        <a href="{{ url_for('index') }}" 
           class="inline-flex items-center text-purple-400 hover:text-purple-300 transition-colors">
            <i class="fas fa-arrow-left mr-2"></i>Back to Albums
        </a>
    </div>

    <div class="bg-white/10 rounded-lg border border-white/20 backdrop-blur-sm overflow-hidden">
        <div class="bg-gradient-to-r from-purple-600/30 to-blue-600/30 p-6">
            <div class="flex flex-col md:flex-row md:items-start gap-6">
                <div class="w-48 h-48 mx-auto md:mx-0 bg-white/20 rounded-lg flex items-center justify-center border-2 border-white/30">
                    <div class="text-center text-white/70">
                        <i class="fas fa-compact-disc text-6xl mb-2"></i>
                        <div class="text-sm">Album Cover</div>
                    </div>
                </div>

                <div class="flex-1 text-center md:text-left">
                    <h1 class="text-4xl font-bold text-white mb-2">{{ album.title }}</h1>
                    
                    {% if album.artists %}
                        <div class="text-xl text-purple-200 mb-4">
                            <i class="fas fa-users mr-2"></i>
                            {% for artist in album.artists %}
                                <span class="hover:text-white transition-colors">{{ artist }}</span>
                                {% if not loop.last %}, {% endif %}
                            {% endfor %}
                        </div>
                    {% endif %}

                    <div class="space-y-3">
                        <div class="flex items-center justify-center md:justify-start text-gray-300">
                            <i class="fas fa-calendar-alt mr-3 w-5"></i>
                            <span>Released in {{ album.release_year }}</span>
                        </div>
                        
                        <div class="flex items-center justify-center md:justify-start text-gray-300">
                            <i class="fas fa-music mr-3 w-5"></i>
                            <span>{{ album.genre }}</span>
                        </div>
                        
                        <div class="flex items-center justify-center md:justify-start text-gray-400">
                            <i class="fas fa-clock mr-3 w-5"></i>
                            <span>Added {{ album.created_at.strftime('%B %d, %Y') }}</span>
                        </div>
                    </div>

                    <div class="flex flex-col sm:flex-row gap-3 mt-6">
                        <a href="{{ url_for('edit_album', album_id=album.id) }}" 
                           class="flex-1 bg-yellow-600 hover:bg-yellow-700 text-white px-4 py-2 rounded-lg transition-colors font-medium flex items-center justify-center">
                            <i class="fas fa-edit mr-2"></i>Edit Album
                        </a>
                        
                        <form method="POST" action="{{ url_for('delete_album', album_id=album.id) }}" 
                              class="flex-1" onsubmit="return confirm('Are you sure you want to delete this album? This action cannot be undone.')">
                            <button type="submit" 
                                    class="w-full bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg transition-colors font-medium flex items-center justify-center">
                                <i class="fas fa-trash mr-2"></i>Delete Album
                            </button>
                        </form>
                    </div>
                </div>
            </div>
        </div>

        <div class="p-6">
            <h2 class="text-2xl font-bold text-white mb-4">Album Information</h2>
            
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                {% if album.artists %}
                <div class="bg-white/5 rounded-lg p-4">
                    <h3 class="text-lg font-semibold text-white mb-3 flex items-center">
                        <i class="fas fa-users mr-2 text-purple-400"></i>Featured Artists
                    </h3>
                    <div class="space-y-2">
                        {% for artist in album.artists %}
                            <div class="flex items-center justify-between text-gray-300 p-2 rounded hover:bg-white/10 transition-colors">
                                <span>{{ artist }}</span>
                                <i class="fas fa-chevron-right text-gray-500"></i>
                            </div>
                        {% endfor %}
                    </div>
                </div>
                {% endif %}

                <div class="bg-white/5 rounded-lg p-4">
                    <h3 class="text-lg font-semibold text-white mb-3 flex items-center">
                        <i class="fas fa-chart-bar mr-2 text-blue-400"></i>Quick Stats
                    </h3>
                    <div class="space-y-3">
                        <div class="flex justify-between text-gray-300">
                            <span>Release Decade:</span>
                            <span class="font-medium">{{ (album.release_year // 10) * 10 }}s</span>
                        </div>
                        <div class="flex justify-between text-gray-300">
                            <span>Age:</span>
                            <span class="font-medium">{{ 2024 - album.release_year }} years old</span>
                        </div>
                        {% if album.artists %}
                        <div class="flex justify-between text-gray-300">
                            <span>Artist Count:</span>
                            <span class="font-medium">{{ album.artists|length }} artist{{ 's' if album.artists|length > 1 else '' }}</span>
                        </div>
                        {% endif %}
                    </div>
                </div>
            </div>

            <div class="mt-6 flex flex-wrap gap-2">
                <span class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-purple-600/30 text-purple-200 border border-purple-500/50">
                    <i class="fas fa-tag mr-1"></i>{{ album.genre }}
                </span>
                <span class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-blue-600/30 text-blue-200 border border-blue-500/50">
                    <i class="fas fa-calendar mr-1"></i>{{ album.release_year }}
                </span>
            </div>
        </div>
    </div>

    <div class="mt-8 grid grid-cols-1 sm:grid-cols-3 gap-4">
        <a href="{{ url_for('index', search=album.genre) }}" 
           class="bg-white/10 hover:bg-white/20 border border-white/20 rounded-lg p-4 text-center transition-colors group">
            <i class="fas fa-music text-2xl text-purple-400 mb-2 group-hover:text-purple-300"></i>
            <div class="text-white font-medium">More {{ album.genre }}</div>
            <div class="text-gray-400 text-sm">Browse similar albums</div>
        </a>

        <a href="{{ url_for('index', search=album.release_year) }}" 
           class="bg-white/10 hover:bg-white/20 border border-white/20 rounded-lg p-4 text-center transition-colors group">
            <i class="fas fa-calendar-alt text-2xl text-blue-400 mb-2 group-hover:text-blue-300"></i>
            <div class="text-white font-medium">{{ album.release_year }} Albums</div>
            <div class="text-gray-400 text-sm">Browse same year</div>
        </a>

        <a href="{{ url_for('create_album') }}" 
           class="bg-white/10 hover:bg-white/20 border border-white/20 rounded-lg p-4 text-center transition-colors group">
            <i class="fas fa-plus text-2xl text-green-400 mb-2 group-hover:text-green-300"></i>
            <div class="text-white font-medium">Add New Album</div>
            <div class="text-gray-400 text-sm">Expand your collection</div>
        </a>
    </div>

    <div class="mt-8 bg-white/5 rounded-lg p-6 border border-white/10">
        <h3 class="text-xl font-bold text-white mb-4 flex items-center">
            <i class="fas fa-lightbulb mr-2 text-yellow-400"></i>Suggestions
        </h3>
        <div class="text-gray-300">
            <p class="mb-2">You might also like:</p>
            <div class="flex flex-wrap gap-2">
                <a href="{{ url_for('index', search=album.genre) }}" 
                   class="text-purple-400 hover:text-purple-300 underline transition-colors">
                    Other {{ album.genre }} albums
                </a>
                <span class="text-gray-500">•</span>
                <a href="{{ url_for('index', search=(album.release_year // 10) * 10) }}" 
                   class="text-blue-400 hover:text-blue-300 underline transition-colors">
                    More from the {{ (album.release_year // 10) * 10 }}s
                </a>
                {% if album.artists and album.artists[0] %}
                <span class="text-gray-500">•</span>
                <a href="{{ url_for('index', search=album.artists[0]) }}" 
                   class="text-green-400 hover:text-green-300 underline transition-colors">
                    More by {{ album.artists[0] }}
                </a>
                {% endif %}
            </div>
        </div>
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const albumCover = document.querySelector('.fa-compact-disc');
    if (albumCover) {
        albumCover.style.animation = 'spin 4s linear infinite';
        albumCover.addEventListener('mouseenter', function() {
            this.style.animationPlayState = 'paused';
        });
        albumCover.addEventListener('mouseleave', function() {
            this.style.animationPlayState = 'running';
        });
    }
});
const style = document.createElement('style');
style.textContent = `
    @keyframes spin {
        from { transform: rotate(0deg); }
        to { transform: rotate(360deg); }
    }
`;
document.head.appendChild(style);
</script>
{% endblock %}
