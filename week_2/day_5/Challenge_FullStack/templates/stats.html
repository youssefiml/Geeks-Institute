<!-- project/templates/stats.html -->
{% extends 'base.html' %}
{% block title %}Statistics{% endblock %}
{% block content %}
<h1 class="text-2xl font-bold mb-4">Statistics</h1>

<div class="grid grid-cols-1 md:grid-cols-2 gap-4">
  <div class="bg-white p-4 rounded shadow">
    <h2 class="font-semibold mb-2">Items per Category</h2>
    <canvas id="categoryChart" width="400" height="300"></canvas>
  </div>

  <div class="bg-white p-4 rounded shadow">
    <h2 class="font-semibold mb-2">Average Price per Category</h2>
    <canvas id="avgPriceChart" width="400" height="300"></canvas>
  </div>
</div>

<script>
  const catLabels = {{ labels | tojson }};
  const catValues = {{ values | tojson }};
  const avgLabels = {{ avg_labels | tojson }};
  const avgValues = {{ avg_values | tojson }};

  const ctx = document.getElementById('categoryChart').getContext('2d');
  new Chart(ctx, {
    type: 'bar',
    data: {
      labels: catLabels,
      datasets: [{
        label: 'Items',
        data: catValues
      }]
    },
    options: { responsive: true, maintainAspectRatio: false }
  });

  const ctx2 = document.getElementById('avgPriceChart').getContext('2d');
  new Chart(ctx2, {
    type: 'line',
    data: {
      labels: avgLabels,
      datasets: [{
        label: 'Avg Price',
        data: avgValues,
        fill: false,
      }]
    },
    options: { responsive: true, maintainAspectRatio: false }
  });
</script>
{% endblock %}
